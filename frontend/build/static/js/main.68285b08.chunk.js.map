{"version":3,"sources":["images/headerLogo.svg","components/Header.js","components/Footer.js","contexts/CurrentUserContext.js","components/Card.js","components/Preloader.js","components/Main.js","components/PopupWithForm.js","components/ImagePopup.js","utils/api.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","hooks/useForm.js","components/Register.js","components/Login.js","components/InfoTooltip.js","components/ProtectedRoute.js","utils/auth.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","props","className","src","headerLogo","alt","exact","path","email","to","onClick","handleLogout","Footer","CurrentUserContext","React","createContext","Card","cardData","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","link","name","onCardClick","type","onCardLike","length","onDeleteClick","id","Preloader","Main","cards","onEditProfileClick","onAddPlaceClick","onEditAvatarClick","isCardsLoading","isCardsError","avatar","about","map","card","PopupWithForm","title","isOpen","button","onSubmit","onClose","children","isDisabled","useEffect","handleEscClose","event","key","document","addEventListener","removeEventListener","onMouseDown","target","currentTarget","action","noValidate","disabled","ImagePopup","api","options","this","_url","url","_headers","headers","res","ok","json","Promise","reject","status","all","getUserData","getInitialCards","fetch","method","then","_checkResponse","body","JSON","stringify","cardId","data","authorization","EditProfilePopup","useState","setName","description","setDescription","e","preventDefault","onUpdateUser","minLength","maxLength","required","onChange","value","placeholder","EditAvatarPopup","avatarRef","useRef","onUpdateAvatar","current","isEditAvatarPopupOpen","closeAllPopups","ref","AddPlacePopup","onAddPlace","isSending","values","setValues","errors","setErrors","isValid","setIsValid","resetFrom","useCallback","newErrors","newIsValid","handleChange","evt","input","validationMessage","closest","checkValidity","useFormWithValidation","console","log","Register","password","setPassword","setEmail","Login","handleSubmit","InfoTooltip","caption","icon","ProtectedRoute","Component","component","loggedIn","auth","_baseUrl","localStorage","setItem","token","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","setIsEditAvatarPopupOpen","isImagePopupOpen","setIsImagePopupOpen","isDeleteCardPopupOpen","setIsDeleteCardPopupOpen","infoTooltip","setInfoTooltip","setCards","selectedCard","setSelectedCard","cardForDelete","setCardForDelete","setCurrentUser","setIsCardsLoading","isCardsLoadError","setIsCardsLoadError","setLoggedIn","history","useHistory","undefined","jwt","getItem","getContent","push","handleLogin","catch","err","tokenCheck","userData","finally","isCardSending","setIsCardSending","Provider","removeItem","register","signIn","changeLikeCardStatus","newCard","state","c","user","uploadUserInfo","uploadCard","newCardFull","deleteCard","filter","setUserAvatar","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.68285b08.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/headerLogo.03b78ada.svg\";","import headerLogo from '../images/headerLogo.svg';\nimport React from \"react\";\nimport { Route, Switch, Link } from 'react-router-dom';\n\n\nfunction Header(props) {\n\n  return (\n    <header className=\"header\">\n      <img src={headerLogo} alt=\"Mesto\" className=\"header__logo\" />\n      <Switch>\n        <div className=\"header__auth-container\">\n          <Route exact path=\"/\">\n\n            <p className=\"header__auth\">{props.email}</p>\n            <Link\n              to=\"/sign-in\"\n              onClick={props.handleLogout}\n              className=\"link link_header\"\n            >Выйти</Link>\n\n          </Route>\n\n          <Route path=\"/sign-in\">\n            <Link to=\"/sign-up\" className=\"link link_header\">Зарегистрироваться</Link>\n          </Route>\n\n          <Route path=\"/sign-up\">\n            <Link to=\"/sign-in\" className=\"link link_header\">Войти</Link>\n          </Route>\n        </div>\n      </Switch>\n\n    </header>\n  );\n}\n\nexport default Header;","\nfunction Footer() {\n    return (\n        <footer className=\"footer\">\n            <p className=\"footer__copyright\">\n                &copy; 2020 Mesto Russia\n            </p>\n        </footer>\n    );\n}\n\nexport default Footer;","import React from \"react\";\nexport const CurrentUserContext = React.createContext();","import React from \"react\";\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\n\nfunction Card(props) {\n    const cardData = props.cardData;\n    const currentUser = React.useContext(CurrentUserContext);\n    const isOwn = props.cardData.owner._id === currentUser._id;\n    const cardDeleteButtonClassName = (\n        `card__delete-button ${isOwn ? '' : 'card__delete-button_hidden'}`\n    );\n    const isLiked = cardData.likes.some(i => i._id === currentUser._id);\n    const cardLikeButtonClassName = `card__like-btn ${isLiked ? 'card__like-btn_active' : ''}`;\n\n    function handleClick() {\n        props.onCardClick(cardData);\n        // console.log(cardData);\n    }\n\n    function handleLikeClick() {\n        props.onCardLike(cardData);\n        // console.log(cardData);\n    }\n\n    function handleDeleteClick() {\n        props.onDeleteClick(cardData);\n        // console.log(cardData);\n    }\n\n    return (\n        <li key={props.cardData.id} className=\"gallery__element\">\n            <figure className=\"card\">\n                <img\n                    className=\"card__photo\"\n                    src={cardData.link}\n                    alt={cardData.name}\n                    onClick={handleClick}\n                />\n\n                <figcaption className=\"card__caption\">\n                    <h2 className=\"card__caption-title\">{cardData.name}</h2>\n                    <div className=\"card__likes-container\">\n                        <button \n                        type=\"button\" \n                        className={cardLikeButtonClassName}\n                        onClick={handleLikeClick} \n                        >\n                        </button>\n                        <span className=\"card__likes-count\">{cardData.likes.length}</span>\n                    </div>\n                </figcaption>\n                <button \n                type=\"button\" \n                className={cardDeleteButtonClassName}\n                onClick={handleDeleteClick} \n                >\n                </button>\n            </figure>\n        </li>\n    );\n}\n\nexport default Card;","import React from 'react'\r\n\r\nconst Preloader = () => {\r\n    return (\r\n      <div className=\"preloader\">\r\n        <div className=\"preloader__circle\"> \r\n        </div>\r\n      </div>\r\n    )\r\n};\r\n\r\nexport default Preloader\r\n","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\nimport Card from \"./Card\";\nimport Preloader from \"./Preloader\";\n\n\nfunction Main({\n    cards,\n    onEditProfileClick,\n    onAddPlaceClick,\n    onEditAvatarClick,\n    onCardClick,\n    onCardLike,\n    onDeleteClick,\n    isCardsLoading,\n    isCardsError,\n}) {\n    const currentUser = React.useContext(CurrentUserContext);\n\n    return (\n        <main className=\"content\">\n\n            <section className=\"profile\">\n                <div className=\"profile__user\">\n\n                    <div className=\"profile__userpick-container\">\n                        <img\n                            className=\"profile__image\"\n                            src={currentUser.avatar}\n                            alt=\"аватар\"\n                        />\n                        <button\n                            className=\"profile__edit-userpick-button\"\n                            onClick={onEditAvatarClick}>\n                        </button>\n                    </div>\n\n                    <div className=\"profile__info-container\">\n                        <div className=\"profile__info\">\n                            <h1 className=\"profile__title\">{currentUser.name}</h1>\n                            <p className=\"profile__occupation\">{currentUser.about}</p>\n                        </div>\n                        <button\n                            type=\"button\"\n                            className=\"profile__edit-button\"\n                            onClick={onEditProfileClick}>\n                        </button>\n                    </div>\n                </div>\n\n                <button\n                    type=\"button\"\n                    className=\"profile__add-button\"\n                    onClick={onAddPlaceClick}>\n                </button>\n            </section>\n\n            <section className=\"gallery\">\n                {isCardsLoading && (\n                    <Preloader />\n                )}\n\n                {isCardsError && (\n                    <p className='places__loading'>isCardsError</p>\n                )}\n\n                {!isCardsLoading && !isCardsError && (\n                    <ul className=\"gallery__elements\">\n                        {cards.map((card) => (\n                            <Card\n                                onCardLike={onCardLike}\n                                onCardClick={onCardClick}\n                                onDeleteClick={onDeleteClick}\n                                cardData={card}\n                                key={card._id}\n                            />\n                        ))}\n                    </ul>\n                )}\n            </section>\n        </main>\n    );\n}\n\nexport default Main;","import React from 'react';\n\n\nfunction PopupWithForm({\n  title,\n  name,\n  isOpen,\n  button,\n  onSubmit,\n  onClose,\n  children,\n  isDisabled = false,\n}) {\n\n  React.useEffect(() => {\n    if (!isOpen) return;\n    const handleEscClose = (event) => {\n      if (event.key === \"Escape\") {\n        onClose();\n      }\n    };\n    document.addEventListener(\"keydown\", handleEscClose);\n    return () => {\n      document.removeEventListener(\"keydown\", handleEscClose);\n    };\n  }, [isOpen, onClose]);\n\n  const handleOverlayClose = (event) => {\n    if (event.target === event.currentTarget && isOpen) {\n      onClose();\n    }\n  };\n\n  \n    return (\n        <div className={isOpen ? `popup popup_opened popup-${name}` : `popup popup-${name}`}\n        onMouseDown={handleOverlayClose}\n        >\n        <div className=\"popup__container\">\n          <button type=\"button\" className=\"popup__close-button\" onClick={onClose}></button>\n\n          <form \n            onSubmit={onSubmit} \n            action=\"#\" \n            name=\"edit-profile\" \n            className={`form form_type_${name}`} \n            noValidate\n          >\n          <h2 className=\"form__heading\">{title}</h2>\n          {children}\n          <button \n            type=\"submit\" \n            // className=\"form__save-button\"\n            className={`form__save-button ${\n              isDisabled && \"form__save-button_invalid\"\n            }`}\n            disabled={isDisabled}\n            >\n              {button}\n          </button>\n          </form>\n        </div>\n      </div>\n    );\n  } \n\nexport default PopupWithForm; ","import React from \"react\";\n\nfunction ImagePopup({ \n    card, \n    onClose, \n    isOpen, \n    name}) {\n    // console.log(props.card.link);\n    React.useEffect(() => {\n        if (!isOpen) return;\n        const handleEscClose = (event) => {\n          if (event.key === \"Escape\") {\n            onClose();\n          }\n        };\n        document.addEventListener(\"keydown\", handleEscClose);\n        return () => {\n          document.removeEventListener(\"keydown\", handleEscClose);\n        };\n      }, [isOpen, onClose]);\n    \n      const handleOverlayClose = (event) => {\n        if (event.target === event.currentTarget && isOpen) {\n            onClose();\n        }\n      };\n\n    return (\n        <div \n        className={isOpen ? `popup popup_opened popup-${name}` : `popup popup-${name}`}\n        onMouseDown={handleOverlayClose}\n        >\n            <div className=\"popup__container-image\">\n                <img src={`${card.link}`} alt=\"#\" className=\"popup__card-image\" />\n                <p className=\"popup__caption\">{card.name}</p>\n                <button className=\"popup__close-button\" type=\"button\" onClick={onClose}></button>\n            </div>\n        </div>\n    );\n}\n\nexport default ImagePopup;\n\n\n\n\n\n","class Api {\n  constructor(options) {\n    this._url = options.url;\n    this._headers = options.headers;\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Error: ${res.status}`);\n  }\n\n  getInitialData() {\n    return Promise.all([this.getUserData(), this.getInitialCards()]);\n  }\n\n  getInitialCards() {\n    return fetch(`${this._url}cards/`, {\n      method: \"GET\",\n      headers: this._headers\n    })\n      .then(this._checkResponse)\n  }\n\n  getUserData() {\n    return fetch(`${this._url}users/me`, {\n      method: 'GET',\n      headers: this._headers\n    })\n      .then(this._checkResponse)\n  }\n\n\n  uploadCard({name, link}) {\n    return fetch(`${this._url}cards`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({name, link})\n    })\n      .then(this._checkResponse)\n  }\n\n  deleteCard(cardId) {\n    return fetch(`${this._url}cards/${cardId}`, {\n      method: 'DELETE',\n      headers: this._headers\n    })\n      .then(this._checkResponse)\n  }\n\n  uploadUserInfo(data) {\n    return fetch(`${this._url}users/me`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify(data)\n    })\n      .then(this._checkResponse)\n  }\n\n  //аватар\n  setUserAvatar(link) {\n    return fetch(`${this._url}users/me/avatar`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify(link)\n    })\n      .then(this._checkResponse)\n  }\n\n  changeLikeCardStatus(id, isLiked) {\n    if (isLiked) {\n      return fetch(`${this._url}cards/likes/${id}`, {\n        method: \"PUT\",\n        headers: this._headers\n      })\n        .then(this._checkResponse);\n    } else {\n      return fetch(`${this._url}cards/likes/${id}`, {\n        method: \"DELETE\",\n        headers: this._headers\n      })\n        .then(this._checkResponse);\n    }\n  }\n}\n\nconst api = new Api({\n  url: 'https://mesto.nomoreparties.co/v1/cohort-20/',\n  headers: {\n    \"content-type\": \"application/json\",\n    authorization: '5a191bce-603b-4e04-819b-a182504a8e8f'\n  }\n});\n\nexport default api;\n","import React from 'react';\nimport PopupWithForm from \"./PopupWithForm\";\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\n\nfunction EditProfilePopup(props) {\n    const [name, setName] = React.useState(\"\");\n    const [description, setDescription] = React.useState(\"\");\n    const currentUser = React.useContext(CurrentUserContext);\n\n    React.useEffect(() => {\n        setName(currentUser.name);\n        setDescription(currentUser.about);\n        // console.log(currentUser.name);\n    }, [currentUser]);\n\n    function handleNameChange(e) {\n        setName(e.target.value)\n    }\n\n    function handleDescriptionChange(e) {\n        setDescription(e.target.value)\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        props.onUpdateUser({\n            name,\n            about: description,\n        });\n    }\n\n\n    return (\n        <PopupWithForm\n            isOpen={props.isOpen ? \"popup_is-opened\" : \"\"}\n            onClose={props.onClose}\n            onSubmit={handleSubmit}\n            name=\"edit-profile\"\n            title=\"Редактировать профиль\"\n            button=\"Сохранить\"\n        >\n            <input\n                id=\"name-user\"\n                minLength=\"2\"\n                maxLength=\"40\"\n                type=\"text\"\n                name=\"name\"\n                className=\"form__input form__input_type_name\"\n                required\n                onChange={handleNameChange}\n                placeholder=\"Имя\"\n                value={name} \n            />\n\n            <span id=\"name-user-error\" className=\"error\"></span>\n\n            <input\n                id=\"occupation\"\n                minLength=\"2\"\n                maxLength=\"200\"\n                type=\"text\"\n                name=\"occupation\"\n                className=\"form__input form__input_type_occupation\"\n                required\n                onChange={handleDescriptionChange}\n                placeholder=\"О себе\"\n                value={description}\n            />\n            <span id=\"occupation-error\" className=\"error\"></span>\n        </PopupWithForm>\n    );\n\n}\n\nexport default EditProfilePopup;\n\n\n\n\n\n\n\n","import React from 'react';\nimport PopupWithForm from \"./PopupWithForm\";\n\n\nfunction EditAvatarPopup(props) {\n    const avatarRef = React.useRef('');\n\n    function handleSubmit(e) {\n        e.preventDefault();\n\n        props.onUpdateAvatar({\n            avatar: avatarRef.current.value\n        });\n    }\n\n    return (\n        <PopupWithForm\n            name=\"edit-userpick\"\n            onClose={props.onClose}\n            isOpen={props.isOpen}\n            title=\"Обновить аватар\"\n            button=\"Сохранить\"\n            onSubmit={handleSubmit}\n            isEditAvatarPopupOpen={props.isOpen}\n            closeAllPopups={props.onClose}\n        >\n            <input\n                id=\"userpick-link\"\n                type=\"url\"\n                className=\"form__input form__input_type_img-url\"\n                name=\"url\"\n                placeholder=\"https://somewebsite.com/someimage.jpg\"\n                required\n                ref={avatarRef}\n            />\n\n            <span id=\"userpick-link-error\" className=\"error\"></span>\n        </PopupWithForm>\n    );\n\n}\n\nexport default EditAvatarPopup;","import React, { useEffect } from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport {useFormWithValidation} from \"../hooks/useForm\";\n\n\nfunction AddPlacePopup({onAddPlace, onClose, isOpen, isSending}) {\n    const {values, handleChange, resetFrom, errors, isValid} = useFormWithValidation();\n    // const [placeName, setPlaceName] = React.useState(\"\");\n    // const [imageUrl, setImageUrl] = React.useState(\"\");\n\n\n    // function handlePlaceNameChange(e) {\n    //     setPlaceName(e.target.value)\n    // }\n\n    // function handleImageChange(e) {\n    //     setImageUrl(e.target.value)\n    // }\n\n    useEffect(() => {\n      resetFrom()\n    }, [isOpen, resetFrom]);\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        onAddPlace(values);\n        console.log(values)\n    }\n\n\n    return (\n        <PopupWithForm\n            name=\"add-image\"\n            title=\"Новое место\"\n            button={isSending ? \"Сохранение...\" : \"Сохранить\"}\n            onSubmit={handleSubmit}\n            onClose={onClose}\n            isOpen={isOpen}\n            isDisabled={!isValid || isSending}\n          >\n            <input\n              id=\"name-card\"\n              minLength=\"3\"\n              maxLength=\"200\"\n              type=\"text\"\n              name=\"name\"\n              placeholder=\"Название\"\n              className=\"form__input form__input_type_place\"\n              onChange={handleChange}\n              value={values.name || \"\"}\n              required \n            />\n            <span id=\"name-card-error\" className=\"error\">\n              {errors.name || \"\"}\n            </span>\n\n            <input id=\"link\"\n              type=\"url\"\n              className=\"form__input form__input_type_img-url\"\n              name=\"link\"\n              placeholder=\"Ссылка на картинку\" \n              onChange={handleChange}\n              value={values.link || \"\"}\n              required \n              />\n\n            <span id=\"link-error\" className=\"error\">\n            {errors.link || \"\"}\n            </span>\n          </PopupWithForm>\n    );\n\n}\n\nexport default AddPlacePopup;\n","import React, { useCallback } from \"react\";\n\nexport function useFormWithValidation() {\n    const [values, setValues] = React.useState({});\n    const [errors, setErrors] = React.useState({});\n    const [isValid, setIsValid] = React.useState(false);\n  \n    const handleChange = (evt) => {\n      const input = evt.target;\n      const value = input.value;\n      const name = input.name;\n      setValues({ ...values, [name]: value });\n      setErrors({ ...errors, [name]: input.validationMessage });\n      setIsValid(input.closest(\"form\").checkValidity());\n    };\n  \n    const resetFrom = useCallback(\n      (newValues = {}, newErrors = {}, newIsValid = false) => {\n        setValues(newValues);\n        setErrors(newErrors);\n        setIsValid(newIsValid);\n      },\n      [setValues, setErrors, setIsValid]\n    );\n  \n    return { values, handleChange, resetFrom, errors, isValid };\n  }","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nfunction Register(props) {\n    const [password, setPassword] = React.useState('');\n    const [email, setEmail] = React.useState('');\n\n    function handleEmailChange(evt) {\n        setEmail(evt.target.value);\n    }\n\n    function handlePasswordChange(evt) {\n        setPassword(evt.target.value);\n    }\n\n    const handleSubmit = (evt) => {\n        evt.preventDefault();\n        props.onSubmit(password, email);\n        setPassword('');\n    }\n\n    return (\n        <main>\n            <section className=\"auth\">\n                <form \n                className=\"auth-form\"\n                onSubmit={handleSubmit}\n                >\n                    <h2 className=\"auth-form__title\">Регистрация</h2>\n\n                    <input\n                        className=\"auth-form__input\"\n                        type=\"email\"\n                        placeholder=\"Email\"\n                        required\n                        value={email}\n                        onChange={handleEmailChange}\n                    />\n\n                    <input\n                        className=\"auth-form__input\"\n                        type=\"password\"\n                        placeholder=\"Пароль\"\n                        required\n                        value={password}\n                        onChange={handlePasswordChange}\n                    />\n\n                    <button\n                        className=\"auth-form__submit-button\"\n                        type=\"submit\"\n                    >\n                        Зарегистрироваться\n                </button>\n                </form>\n                <p className=\"auth__registered\">Уже зарегистрированы? {<Link\n                        to=\"/sign-in\"\n                        className=\"link\"\n                    >\n                        Войти\n                </Link>}\n                </p>\n            </section>\n\n        </main>\n    );\n}\n\nexport default Register;","import React from \"react\";\n// import { Link } from \"react-router-dom\";\n\nfunction Login(props) {\n    const [email, setEmail] = React.useState('');\n    const [password, setPassword] = React.useState('');\n\n    function handleEmailChange(evt) {\n        setEmail(evt.target.value);\n    }\n\n    function handlePasswordChange(evt) {\n        setPassword(evt.target.value);\n    }\n\n    function handleSubmit(evt) {\n        evt.preventDefault();\n        if (!password || !email) {\n            return;\n        }\n        props.onSubmit(password, email);\n        setEmail('');\n        setPassword('');\n    }\n\n\n    return (\n        <main>\n            <section className=\"auth\">\n                <form\n                    className=\"auth-form\"\n                    onSubmit={handleSubmit}\n                >\n                    <h2 className=\"auth-form__title\">Вход</h2>\n\n                    <input\n                        className=\"auth-form__input\"\n                        type=\"email\"\n                        placeholder=\"Email\"\n                        required\n                        value={email}\n                        onChange={handleEmailChange}\n                    />\n\n                    <input\n                        className=\"auth-form__input\"\n                        type=\"password\"\n                        placeholder=\"Пароль\"\n                        required\n                        value={password}\n                        onChange={handlePasswordChange}\n                    />\n\n                    <button\n                        className=\"auth-form__submit-button\"\n                        type=\"submit\"\n                        onClick={handleSubmit}\n                    >\n                        Войти\n                </button>\n                </form>\n            </section>\n\n        </main>\n    );\n}\n\nexport default Login;","import React from 'react';\n\nfunction InfoTooltip({ caption, icon, isOpen, onClose }) {\n    return (\n        <div className={`popup ${isOpen && 'popup_opened'}`}>\n            <div className=\"tooltip\">\n                <button className=\"popup__close-button\" onClick={onClose} type=\"button\" />\n                <div className={`tooltip__icon tooltip__icon_type_${icon}`}></div>\n                <p className=\"tooltip__caption\">{caption}</p>\n            </div>\n        </div>\n        \n    )\n}\n\nexport default InfoTooltip;","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\n// этот компонент принимает другой компонент в качестве пропса\n// он также может взять неограниченное число пропсов и передать их новому компоненту\nconst ProtectedRoute = ({ component: Component, ...props }) => {\n  return (\n    <Route>\n      {() =>\n        props.loggedIn ? <Component {...props} /> : <Redirect to=\"./sign-in\" />\n      }\n    </Route>\n  );\n};\n\nexport default ProtectedRoute; ","class Auth {\n    constructor() {\n        this._baseUrl = 'https://auth.nomoreparties.co'\n    }\n\n    _checkResponse(res) {\n        if (res.ok) {\n            return res.json();\n        }\n        return Promise.reject(`Error: ${res.status}`);\n    }\n\n    register(password, email) {\n        return fetch(`${this._baseUrl}/signup`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                \"password\": password,\n                \"email\": email\n            })\n        })\n            .then(this._checkResponse)\n    }\n\n    signIn(password, email) {\n        return fetch(`${this._baseUrl}/signin`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                \"password\": password,\n                \"email\": email\n            })\n        })\n            .then(this._checkResponse)\n            .then((data) => {\n                // сохраняем токен\n                localStorage.setItem('token', data.token);\n                return data;\n            })\n    }\n\n    getContent(token) {\n        return fetch(`${this._baseUrl}/users/me`, {\n            method: 'GET',\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `Bearer ${token}`\n            }\n        })\n            .then(this._checkResponse)\n    }\n}\n\nexport const auth = new Auth();","import React from \"react\";\nimport Header from './Header.js';\nimport Footer from './Footer.js';\nimport Main from './Main.js';\nimport PopupWithForm from './PopupWithForm.js';\nimport ImagePopup from './ImagePopup.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport api from \"../utils/api.js\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport { Route, Switch, useHistory } from 'react-router-dom';\nimport Register from \"./Register\";\nimport Login from \"./Login\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport { auth } from \"../utils/auth\";\n\nfunction App() {\n  //управление попапами\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\n  const [isDeleteCardPopupOpen, setIsDeleteCardPopupOpen] = React.useState(false);\n\n  const [infoTooltip, setInfoTooltip] = React.useState({ caption: '', icon: '', isOpen: false });\n\n  const [cards, setCards] = React.useState([]);\n  const [selectedCard, setSelectedCard] = React.useState(\"\");\n  const [cardForDelete, setCardForDelete] = React.useState(null);\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [email, setEmail] = React.useState('');\n  const [isCardsLoading, setIsCardsLoading] = React.useState(false);\n  const [isCardsLoadError, setIsCardsLoadError] = React.useState();\n\n  const [loggedIn, setLoggedIn] = React.useState(false);\n\n  const history = useHistory();\n\n  React.useEffect(() => {\n    function tokenCheck() {\n      const jwt = localStorage.getItem('token');\n      if (jwt) {\n        auth\n          .getContent(jwt)\n          .then(res => {\n            if (res) {\n              setEmail(res.data.email);\n              history.push('/');\n              handleLogin();\n            }\n          })\n          .catch(err => console.log(err))\n      }\n    }\n\n    tokenCheck();\n  }, [loggedIn, history])\n\n  // React.useEffect(() => {\n  //   api.getInitialData()\n  //     .then(([userData, cardsData]) => {\n  //       // console.log(userData);\n  //       setCurrentUser(userData);\n  //       setCards(cardsData);\n  //     })\n  //     .catch((err) => console.log(err));\n  // }, []);\n\n  React.useEffect(() => {\n    if (loggedIn) {\n      api.getUserData()\n        .then((userData) => {\n          setCurrentUser(userData);\n        })\n        .catch(err => console.log(`Загрузка информации о пользователе: ${err}`));\n\n      setIsCardsLoading(true);\n      setIsCardsLoadError();\n      api.getInitialCards()\n        .then((cardData) => {\n          setCards(cardData);\n        })\n        .catch(err => setIsCardsLoadError(err))\n        .finally(() => setIsCardsLoading(false));\n    }\n  }, [loggedIn]);\n\n  function handleCardClick(card) {\n    // console.log(card);\n    setSelectedCard(card)\n    setIsImagePopupOpen(true)\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsImagePopupOpen(false);\n    setInfoTooltip({ ...infoTooltip, isOpen: false });\n    setIsDeleteCardPopupOpen(false);\n    setCardForDelete(undefined);\n  }\n\n  //Обработчик лайка\n  function handleCardLike(card) {\n    // console.log(card);\n\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    api\n      .changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        // console.log(newCard);\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n      })\n      .catch((err) => console.log(err));\n  }\n\n  function handleCardDeleteRequest(card) {\n    setCardForDelete(card);\n    setIsDeleteCardPopupOpen(true);\n  }\n\n  //Обработчик удаления карточки\n  function handleCardDelete(evt) {\n    evt.preventDefault();\n    api\n      .deleteCard(cardForDelete._id)\n      .then(() => {\n        setCards((state) => state.filter((c) => c._id !== cardForDelete._id));\n        setIsDeleteCardPopupOpen(false);\n      })\n      .catch(err => console.log(`При удалении карточки: ${err}`))\n  }\n\n  //Обработчик добавления карточки\n  const [isCardSending, setIsCardSending] = React.useState(false);\n  function handleAddPlaceSubmit(newCard) {\n    setIsCardSending(true);\n    api.uploadCard(newCard)\n      // .then((card) => setCards([card, ...cards]))\n      // .catch((err) => console.log(err))\n      // .finally(() => closeAllPopups());\n      .then((newCardFull) => {\n        setCards((state) => [\n          newCardFull,\n          ...state,\n        ]);\n        closeAllPopups();\n      })\n      .catch(err => console.log(`Добавление карточки: ${err}`))\n      .finally(() => setIsCardSending(false));\n  }\n\n  //Обработчик изменения информации пользователя\n  function handleUpdateUser(user) {\n    api\n      .uploadUserInfo(user)\n      .then((res) => {\n        setCurrentUser(res);\n      })\n      .catch((err) => console.log(err))\n      .finally(() => closeAllPopups());\n  }\n\n  //Обработчик изменения аватара\n  function handleUpdateAvatar(link) {\n    api\n      .setUserAvatar(link)\n      .then((res) => {\n        setCurrentUser(res);\n      })\n      .catch((err) => console.log(err))\n      .finally(() => closeAllPopups());\n  }\n\n  function handleLogin() {\n    setLoggedIn(true);\n  }\n\n  function handleLogout() {\n    localStorage.removeItem('token');\n    history.push('/sign-in');\n    setLoggedIn(false);\n  }\n\n  //Обработчик сабмита формы регистрации\n  function handleRegisterFormSubmit(password, email) {\n    auth\n      .register(password, email)\n      .then(() => {\n        setInfoTooltip({ caption: 'Вы успешно зарегистрировались!', icon: 'success', isOpen: true });\n        history.push('/sign-in');\n        // console.log(res);\n      })\n      .catch((err) => {\n        setInfoTooltip({ caption: 'Что-то пошло не так! Попробуйте еще раз.', icon: 'error', isOpen: true });\n        console.log(err);\n      })\n  }\n\n  //Обработчик сабмита формы входа\n  function handleLoginFormSubmit(password, email) {\n    auth.signIn(password, email)\n      .then((data) => {\n        if (data.token) {\n          handleLogin();\n          history.push('/');\n        }\n      })\n      .catch((err) => {\n        setInfoTooltip({ caption: 'Что-то пошло не так! Попробуйте еще раз.', icon: 'error', isOpen: true });\n        console.log(err);\n      })\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"container\">\n        <div className=\"page\">\n\n          <Header loggedIn={loggedIn}\n            email={email}\n            handleLogout={handleLogout}\n          />\n\n          <Switch>\n            <Route path=\"/sign-up\" >\n              <Register\n                onSubmit={handleRegisterFormSubmit}\n              />\n            </Route>\n\n            <Route path=\"/sign-in\" >\n              <Login\n                onSubmit={handleLoginFormSubmit}\n              />\n            </Route>\n\n\n            <ProtectedRoute\n              path=\"/\"\n              loggedIn={loggedIn}\n              component={Main}\n              onCardClick={handleCardClick}\n              onCardLike={handleCardLike}\n              onDeleteClick={handleCardDeleteRequest}\n              onEditProfileClick={handleEditProfileClick}\n              onEditAvatarClick={handleEditAvatarClick}\n              onAddPlaceClick={handleAddPlaceClick}\n              cards={cards}\n              isCardsLoading={isCardsLoading}\n              isCardsError={isCardsLoadError}\n            />\n          </Switch>\n\n\n          <Footer />\n\n          <EditProfilePopup\n            isOpen={isEditProfilePopupOpen}\n            onClose={closeAllPopups}\n            onUpdateUser={handleUpdateUser}\n          >\n          </EditProfilePopup>\n\n          <AddPlacePopup\n            onClose={closeAllPopups}\n            isOpen={isAddPlacePopupOpen}\n            onAddPlace={handleAddPlaceSubmit}\n            isSending={isCardSending}\n          >\n          </AddPlacePopup>\n\n          <PopupWithForm\n            isOpen={isDeleteCardPopupOpen}\n            title=\"Вы уверены?\"\n            name=\"confirm-delete\"\n            button=\"Да\"\n            onSubmit={handleCardDelete}\n            onClose={closeAllPopups}\n          />\n\n          <ImagePopup\n            name=\"view-image\"\n            card={selectedCard}\n            isOpen={isImagePopupOpen}\n            onClose={closeAllPopups}\n          />\n\n          {/* <PopupWithForm\n            name=\"confirm-delete\"\n            onClose={closeAllPopups}\n            title=\"Вы уверены?\"\n            button=\"Да\" /> */}\n\n          <EditAvatarPopup\n            onClose={closeAllPopups}\n            isOpen={isEditAvatarPopupOpen}\n            onUpdateAvatar={handleUpdateAvatar}\n          >\n          </EditAvatarPopup>\n\n          <InfoTooltip\n            caption={infoTooltip.caption}\n            icon={infoTooltip.icon}\n            isOpen={infoTooltip.isOpen}\n            onClose={closeAllPopups}\n          />\n\n        </div>\n      </div >\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}