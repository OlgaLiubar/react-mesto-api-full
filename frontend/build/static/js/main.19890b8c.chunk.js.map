{"version":3,"sources":["images/headerLogo.svg","components/Header.js","components/Footer.js","contexts/CurrentUserContext.js","components/Card.js","components/Preloader.js","components/Main.js","components/PopupWithForm.js","components/ImagePopup.js","utils/api.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","hooks/useForm.js","components/Register.js","components/Login.js","components/InfoTooltip.js","components/ProtectedRoute.js","utils/auth.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","props","className","src","headerLogo","alt","exact","path","email","to","onClick","handleLogout","Footer","CurrentUserContext","React","createContext","Card","card","onCardLike","onCardClick","onDeleteClick","currentUser","useContext","isLiked","likes","some","i","_id","cardLikeButtonClassName","isOwn","owner","cardDeleteButtonClassName","link","name","type","length","Preloader","Main","cards","onEditProfileClick","onAddPlaceClick","onEditAvatarClick","isCardsLoading","isCardsError","avatar","about","map","PopupWithForm","title","isOpen","button","onSubmit","onClose","children","isDisabled","useEffect","handleEscClose","event","key","document","addEventListener","removeEventListener","onMouseDown","target","currentTarget","action","noValidate","disabled","ImagePopup","api","options","this","_url","url","_headers","headers","res","ok","json","Promise","reject","status","all","getUserData","getInitialCards","fetch","method","credentials","then","_checkResponse","body","JSON","stringify","cardId","data","id","Accept","EditProfilePopup","useState","setName","description","setDescription","e","preventDefault","onUpdateUser","minLength","maxLength","required","onChange","value","placeholder","EditAvatarPopup","avatarRef","useRef","onUpdateAvatar","current","isEditAvatarPopupOpen","closeAllPopups","ref","AddPlacePopup","onAddPlace","isSending","values","setValues","errors","setErrors","isValid","setIsValid","resetFrom","useCallback","newErrors","newIsValid","handleChange","evt","input","validationMessage","closest","checkValidity","useFormWithValidation","console","log","Register","password","setPassword","setEmail","Login","handleSubmit","InfoTooltip","caption","icon","ProtectedRoute","Component","component","loggedIn","auth","_baseUrl","localStorage","setItem","token","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","setIsEditAvatarPopupOpen","isImagePopupOpen","setIsImagePopupOpen","isDeleteCardPopupOpen","setIsDeleteCardPopupOpen","infoTooltip","setInfoTooltip","setCards","selectedCard","setSelectedCard","cardForDelete","setCardForDelete","setCurrentUser","setIsCardsLoading","isCardsLoadError","setIsCardsLoadError","setLoggedIn","history","useHistory","undefined","jwt","getItem","getContent","push","handleLogin","catch","err","tokenCheck","userData","cardData","finally","isCardSending","setIsCardSending","Provider","removeItem","register","signIn","like","changeLikeCardStatus","newCard","state","c","user","uploadUserInfo","uploadCard","newCardFull","deleteCard","filter","setUserAvatar","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.19890b8c.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/headerLogo.03b78ada.svg\";","import headerLogo from '../images/headerLogo.svg';\nimport React from \"react\";\nimport { Route, Switch, Link } from 'react-router-dom';\n\n\nfunction Header(props) {\n\n  return (\n    <header className=\"header\">\n      <img src={headerLogo} alt=\"Mesto\" className=\"header__logo\" />\n      <Switch>\n        <div className=\"header__auth-container\">\n          <Route exact path=\"/\">\n\n            <p className=\"header__auth\">{props.email}</p>\n            <Link\n              to=\"/sign-in\"\n              onClick={props.handleLogout}\n              className=\"link link_header\"\n            >Выйти</Link>\n\n          </Route>\n\n          <Route path=\"/sign-in\">\n            <Link to=\"/sign-up\" className=\"link link_header\">Зарегистрироваться</Link>\n          </Route>\n\n          <Route path=\"/sign-up\">\n            <Link to=\"/sign-in\" className=\"link link_header\">Войти</Link>\n          </Route>\n        </div>\n      </Switch>\n\n    </header>\n  );\n}\n\nexport default Header;","\nfunction Footer() {\n    return (\n        <footer className=\"footer\">\n            <p className=\"footer__copyright\">\n                &copy; 2020 Mesto Russia\n            </p>\n        </footer>\n    );\n}\n\nexport default Footer;","import React from \"react\";\nexport const CurrentUserContext = React.createContext();","import React from \"react\";\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\n\nfunction Card({ card, onCardLike, onCardClick, onDeleteClick }) {\n\n    function handleClick() {\n        onCardClick(card);\n        // console.log(cardData);\n    }\n\n    function handleLikeClick() {\n        onCardLike(card);\n        // console.log(cardData);\n    }\n\n    function handleDeleteClick() {\n        onDeleteClick(card);\n        // console.log(cardData);\n    }\n\n    const currentUser = React.useContext(CurrentUserContext);\n\n    const isLiked = card.likes.some((i) => i === currentUser._id);\n    // console.log(isLiked);\n    const cardLikeButtonClassName = `card__like-btn ${isLiked ? 'card__like-btn_active' : ''}`;\n\n    const isOwn = card.owner === currentUser._id;\n    const cardDeleteButtonClassName = (\n        `card__delete-button ${isOwn ? '' : 'card__delete-button_hidden'}`\n    );\n\n    return (\n        <li className=\"gallery__element\">\n            <figure className=\"card\">\n                <img\n                    className=\"card__photo\"\n                    src={card.link}\n                    alt={card.name}\n                    onClick={handleClick}\n                />\n\n                <figcaption className=\"card__caption\">\n                    <h2 className=\"card__caption-title\">{card.name}</h2>\n                    <div className=\"card__likes-container\">\n                        <button \n                        type=\"button\" \n                        className={cardLikeButtonClassName}\n                        onClick={handleLikeClick} \n                        >\n                        </button>\n                        <span className=\"card__likes-count\">{card.likes.length}</span>\n                    </div>\n                </figcaption>\n                <button \n                type=\"button\" \n                className={cardDeleteButtonClassName}\n                onClick={handleDeleteClick} \n                >\n                </button>\n            </figure>\n        </li>\n    );\n}\n\nexport default Card;","import React from 'react'\r\n\r\nconst Preloader = () => {\r\n    return (\r\n      <div className=\"preloader\">\r\n        <div className=\"preloader__circle\"> \r\n        </div>\r\n      </div>\r\n    )\r\n};\r\n\r\nexport default Preloader\r\n","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\nimport Card from \"./Card\";\nimport Preloader from \"./Preloader\";\n\n\nfunction Main({\n    cards,\n    onEditProfileClick,\n    onAddPlaceClick,\n    onEditAvatarClick,\n    onCardClick,\n    onCardLike,\n    onDeleteClick,\n    isCardsLoading,\n    isCardsError,\n}) {\n    const currentUser = React.useContext(CurrentUserContext);\n\n    return (\n        <main className=\"content\">\n\n            <section className=\"profile\">\n                <div className=\"profile__user\">\n\n                    <div className=\"profile__userpick-container\">\n                        <img\n                            className=\"profile__image\"\n                            src={currentUser.avatar}\n                            alt=\"аватар\"\n                        />\n                        <button\n                            className=\"profile__edit-userpick-button\"\n                            onClick={onEditAvatarClick}>\n                        </button>\n                    </div>\n\n                    <div className=\"profile__info-container\">\n                        <div className=\"profile__info\">\n                            <h1 className=\"profile__title\">{currentUser.name}</h1>\n                            <p className=\"profile__occupation\">{currentUser.about}</p>\n                        </div>\n                        <button\n                            type=\"button\"\n                            className=\"profile__edit-button\"\n                            onClick={onEditProfileClick}>\n                        </button>\n                    </div>\n                </div>\n\n                <button\n                    type=\"button\"\n                    className=\"profile__add-button\"\n                    onClick={onAddPlaceClick}>\n                </button>\n            </section>\n\n            <section className=\"gallery\">\n                {isCardsLoading && (\n                    <Preloader />\n                )}\n\n                {isCardsError && (\n                    <p className='places__loading'>isCardsError</p>\n                )}\n\n                {!isCardsLoading && !isCardsError && (\n                    <ul className=\"gallery__elements\">\n                        {cards.map((card) => (\n                            <Card\n                                onCardLike={onCardLike}\n                                onCardClick={onCardClick}\n                                onDeleteClick={onDeleteClick}\n                                card={card}\n                                key={card._id}\n                            />\n                        ))}\n                    </ul>\n                )}\n            </section>\n        </main>\n    );\n}\n\nexport default Main;","import React from 'react';\n\n\nfunction PopupWithForm({\n  title,\n  name,\n  isOpen,\n  button,\n  onSubmit,\n  onClose,\n  children,\n  isDisabled = false,\n}) {\n\n  React.useEffect(() => {\n    if (!isOpen) return;\n    const handleEscClose = (event) => {\n      if (event.key === \"Escape\") {\n        onClose();\n      }\n    };\n    document.addEventListener(\"keydown\", handleEscClose);\n    return () => {\n      document.removeEventListener(\"keydown\", handleEscClose);\n    };\n  }, [isOpen, onClose]);\n\n  const handleOverlayClose = (event) => {\n    if (event.target === event.currentTarget && isOpen) {\n      onClose();\n    }\n  };\n\n  \n    return (\n        <div className={isOpen ? `popup popup_opened popup-${name}` : `popup popup-${name}`}\n        onMouseDown={handleOverlayClose}\n        >\n        <div className=\"popup__container\">\n          <button type=\"button\" className=\"popup__close-button\" onClick={onClose}></button>\n\n          <form \n            onSubmit={onSubmit} \n            action=\"#\" \n            name=\"edit-profile\" \n            className={`form form_type_${name}`} \n            noValidate\n          >\n          <h2 className=\"form__heading\">{title}</h2>\n          {children}\n          <button \n            type=\"submit\" \n            // className=\"form__save-button\"\n            className={`form__save-button ${\n              isDisabled && \"form__save-button_invalid\"\n            }`}\n            disabled={isDisabled}\n            >\n              {button}\n          </button>\n          </form>\n        </div>\n      </div>\n    );\n  } \n\nexport default PopupWithForm; ","import React from \"react\";\n\nfunction ImagePopup({ \n    card, \n    onClose, \n    isOpen, \n    name}) {\n    // console.log(props.card.link);\n    React.useEffect(() => {\n        if (!isOpen) return;\n        const handleEscClose = (event) => {\n          if (event.key === \"Escape\") {\n            onClose();\n          }\n        };\n        document.addEventListener(\"keydown\", handleEscClose);\n        return () => {\n          document.removeEventListener(\"keydown\", handleEscClose);\n        };\n      }, [isOpen, onClose]);\n    \n      const handleOverlayClose = (event) => {\n        if (event.target === event.currentTarget && isOpen) {\n            onClose();\n        }\n      };\n\n    return (\n        <div \n        className={isOpen ? `popup popup_opened popup-${name}` : `popup popup-${name}`}\n        onMouseDown={handleOverlayClose}\n        >\n            <div className=\"popup__container-image\">\n                <img src={`${card.link}`} alt=\"#\" className=\"popup__card-image\" />\n                <p className=\"popup__caption\">{card.name}</p>\n                <button className=\"popup__close-button\" type=\"button\" onClick={onClose}></button>\n            </div>\n        </div>\n    );\n}\n\nexport default ImagePopup;\n\n\n\n\n\n","class Api {\n  constructor(options) {\n    this._url = options.url;\n    this._headers = options.headers;\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Error: ${res.status}`);\n  }\n\n  getInitialData() {\n    return Promise.all([this.getUserData(), this.getInitialCards()]);\n  }\n\n  getInitialCards() {\n    return fetch(`${this._url}cards/`, {\n      method: \"GET\",\n      credentials: 'include',\n      headers: this._headers\n    })\n      .then(this._checkResponse)\n  }\n\n  getUserData() {\n    return fetch(`${this._url}users/me`, {\n      method: 'GET',\n      credentials: 'include',\n      headers: this._headers\n    })\n      .then(this._checkResponse)\n  }\n\n\n  uploadCard({name, link}) {\n    return fetch(`${this._url}cards`, {\n      method: 'POST',\n      credentials: 'include',\n      headers: this._headers,\n      body: JSON.stringify({name, link})\n    })\n      .then(this._checkResponse)\n  }\n\n  deleteCard(cardId) {\n    return fetch(`${this._url}cards/${cardId}`, {\n      method: 'DELETE',\n      credentials: 'include',\n      headers: this._headers\n    })\n      .then(this._checkResponse)\n  }\n\n  uploadUserInfo(data) {\n    return fetch(`${this._url}users/me`, {\n      method: 'PATCH',\n      credentials: 'include',\n      headers: this._headers,\n      body: JSON.stringify(data)\n    })\n      .then(this._checkResponse)\n  }\n\n  //аватар\n  setUserAvatar(link) {\n    return fetch(`${this._url}users/me/avatar`, {\n      method: 'PATCH',\n      credentials: 'include',\n      headers: this._headers,\n      body: JSON.stringify(link)\n    })\n      .then(this._checkResponse)\n  }\n\n  changeLikeCardStatus(id, isLiked) {\n      return fetch(`${this._url}cards/${id}/likes`, {\n        method: isLiked ? 'PUT' : 'DELETE',\n        credentials: 'include',\n        headers: this._headers,\n      })\n        .then(this._checkResponse);\n    }\n  }\n\nconst api = new Api({\n  url: 'http://api.olgaliubar.students.nomoredomains.monster',\n  headers: {\n    Accept: \"application/json\",\n    \"Content-Type\": \"application/json\"\n  }\n});\n\nexport default api;\n","import React from 'react';\nimport PopupWithForm from \"./PopupWithForm\";\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\n\nfunction EditProfilePopup(props) {\n    const [name, setName] = React.useState(\"\");\n    const [description, setDescription] = React.useState(\"\");\n    const currentUser = React.useContext(CurrentUserContext);\n\n    React.useEffect(() => {\n        setName(currentUser.name);\n        setDescription(currentUser.about);\n        // console.log(currentUser.name);\n    }, [currentUser]);\n\n    function handleNameChange(e) {\n        setName(e.target.value)\n    }\n\n    function handleDescriptionChange(e) {\n        setDescription(e.target.value)\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        props.onUpdateUser({\n            name,\n            about: description,\n        });\n    }\n\n\n    return (\n        <PopupWithForm\n            isOpen={props.isOpen ? \"popup_is-opened\" : \"\"}\n            onClose={props.onClose}\n            onSubmit={handleSubmit}\n            name=\"edit-profile\"\n            title=\"Редактировать профиль\"\n            button=\"Сохранить\"\n        >\n            <input\n                id=\"name-user\"\n                minLength=\"2\"\n                maxLength=\"40\"\n                type=\"text\"\n                name=\"name\"\n                className=\"form__input form__input_type_name\"\n                required\n                onChange={handleNameChange}\n                placeholder=\"Имя\"\n                value={name} \n            />\n\n            <span id=\"name-user-error\" className=\"error\"></span>\n\n            <input\n                id=\"occupation\"\n                minLength=\"2\"\n                maxLength=\"200\"\n                type=\"text\"\n                name=\"occupation\"\n                className=\"form__input form__input_type_occupation\"\n                required\n                onChange={handleDescriptionChange}\n                placeholder=\"О себе\"\n                value={description}\n            />\n            <span id=\"occupation-error\" className=\"error\"></span>\n        </PopupWithForm>\n    );\n\n}\n\nexport default EditProfilePopup;\n\n\n\n\n\n\n\n","import React from 'react';\nimport PopupWithForm from \"./PopupWithForm\";\n\n\nfunction EditAvatarPopup(props) {\n    const avatarRef = React.useRef('');\n\n    function handleSubmit(e) {\n        e.preventDefault();\n\n        props.onUpdateAvatar({\n            avatar: avatarRef.current.value\n        });\n    }\n\n    return (\n        <PopupWithForm\n            name=\"edit-userpick\"\n            onClose={props.onClose}\n            isOpen={props.isOpen}\n            title=\"Обновить аватар\"\n            button=\"Сохранить\"\n            onSubmit={handleSubmit}\n            isEditAvatarPopupOpen={props.isOpen}\n            closeAllPopups={props.onClose}\n        >\n            <input\n                id=\"userpick-link\"\n                type=\"url\"\n                className=\"form__input form__input_type_img-url\"\n                name=\"url\"\n                placeholder=\"https://somewebsite.com/someimage.jpg\"\n                required\n                ref={avatarRef}\n            />\n\n            <span id=\"userpick-link-error\" className=\"error\"></span>\n        </PopupWithForm>\n    );\n\n}\n\nexport default EditAvatarPopup;","import React, { useEffect } from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport {useFormWithValidation} from \"../hooks/useForm\";\n\n\nfunction AddPlacePopup({onAddPlace, onClose, isOpen, isSending}) {\n    const {values, handleChange, resetFrom, errors, isValid} = useFormWithValidation();\n    // const [placeName, setPlaceName] = React.useState(\"\");\n    // const [imageUrl, setImageUrl] = React.useState(\"\");\n\n\n    // function handlePlaceNameChange(e) {\n    //     setPlaceName(e.target.value)\n    // }\n\n    // function handleImageChange(e) {\n    //     setImageUrl(e.target.value)\n    // }\n\n    useEffect(() => {\n      resetFrom()\n    }, [isOpen, resetFrom]);\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        onAddPlace(values);\n        console.log(values)\n    }\n\n\n    return (\n        <PopupWithForm\n            name=\"add-image\"\n            title=\"Новое место\"\n            button={isSending ? \"Сохранение...\" : \"Сохранить\"}\n            onSubmit={handleSubmit}\n            onClose={onClose}\n            isOpen={isOpen}\n            isDisabled={!isValid || isSending}\n          >\n            <input\n              id=\"name-card\"\n              minLength=\"3\"\n              maxLength=\"200\"\n              type=\"text\"\n              name=\"name\"\n              placeholder=\"Название\"\n              className=\"form__input form__input_type_place\"\n              onChange={handleChange}\n              value={values.name || \"\"}\n              required \n            />\n            <span id=\"name-card-error\" className=\"error\">\n              {errors.name || \"\"}\n            </span>\n\n            <input id=\"link\"\n              type=\"url\"\n              className=\"form__input form__input_type_img-url\"\n              name=\"link\"\n              placeholder=\"Ссылка на картинку\" \n              onChange={handleChange}\n              value={values.link || \"\"}\n              required \n              />\n\n            <span id=\"link-error\" className=\"error\">\n            {errors.link || \"\"}\n            </span>\n          </PopupWithForm>\n    );\n\n}\n\nexport default AddPlacePopup;\n","import React, { useCallback } from \"react\";\n\nexport function useFormWithValidation() {\n    const [values, setValues] = React.useState({});\n    const [errors, setErrors] = React.useState({});\n    const [isValid, setIsValid] = React.useState(false);\n  \n    const handleChange = (evt) => {\n      const input = evt.target;\n      const value = input.value;\n      const name = input.name;\n      setValues({ ...values, [name]: value });\n      setErrors({ ...errors, [name]: input.validationMessage });\n      setIsValid(input.closest(\"form\").checkValidity());\n    };\n  \n    const resetFrom = useCallback(\n      (newValues = {}, newErrors = {}, newIsValid = false) => {\n        setValues(newValues);\n        setErrors(newErrors);\n        setIsValid(newIsValid);\n      },\n      [setValues, setErrors, setIsValid]\n    );\n  \n    return { values, handleChange, resetFrom, errors, isValid };\n  }","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nfunction Register(props) {\n    const [password, setPassword] = React.useState('');\n    const [email, setEmail] = React.useState('');\n\n    function handleEmailChange(evt) {\n        setEmail(evt.target.value);\n    }\n\n    function handlePasswordChange(evt) {\n        setPassword(evt.target.value);\n    }\n\n    const handleSubmit = (evt) => {\n        evt.preventDefault();\n        props.onSubmit(password, email);\n        setPassword('');\n    }\n\n    return (\n        <main>\n            <section className=\"auth\">\n                <form \n                className=\"auth-form\"\n                onSubmit={handleSubmit}\n                >\n                    <h2 className=\"auth-form__title\">Регистрация</h2>\n\n                    <input\n                        className=\"auth-form__input\"\n                        type=\"email\"\n                        placeholder=\"Email\"\n                        required\n                        value={email}\n                        onChange={handleEmailChange}\n                    />\n\n                    <input\n                        className=\"auth-form__input\"\n                        type=\"password\"\n                        placeholder=\"Пароль\"\n                        required\n                        value={password}\n                        onChange={handlePasswordChange}\n                    />\n\n                    <button\n                        className=\"auth-form__submit-button\"\n                        type=\"submit\"\n                    >\n                        Зарегистрироваться\n                </button>\n                </form>\n                <p className=\"auth__registered\">Уже зарегистрированы? {<Link\n                        to=\"/sign-in\"\n                        className=\"link\"\n                    >\n                        Войти\n                </Link>}\n                </p>\n            </section>\n\n        </main>\n    );\n}\n\nexport default Register;","import React from \"react\";\n// import { Link } from \"react-router-dom\";\n\nfunction Login(props) {\n    const [email, setEmail] = React.useState('');\n    const [password, setPassword] = React.useState('');\n\n    function handleEmailChange(evt) {\n        setEmail(evt.target.value);\n    }\n\n    function handlePasswordChange(evt) {\n        setPassword(evt.target.value);\n    }\n\n    function handleSubmit(evt) {\n        evt.preventDefault();\n        if (!password || !email) {\n            return;\n        }\n        props.onSubmit(password, email);\n        setEmail('');\n        setPassword('');\n    }\n\n\n    return (\n        <main>\n            <section className=\"auth\">\n                <form\n                    className=\"auth-form\"\n                    onSubmit={handleSubmit}\n                >\n                    <h2 className=\"auth-form__title\">Вход</h2>\n\n                    <input\n                        className=\"auth-form__input\"\n                        type=\"email\"\n                        placeholder=\"Email\"\n                        required\n                        value={email}\n                        onChange={handleEmailChange}\n                    />\n\n                    <input\n                        className=\"auth-form__input\"\n                        type=\"password\"\n                        placeholder=\"Пароль\"\n                        required\n                        value={password}\n                        onChange={handlePasswordChange}\n                    />\n\n                    <button\n                        className=\"auth-form__submit-button\"\n                        type=\"submit\"\n                        onClick={handleSubmit}\n                    >\n                        Войти\n                </button>\n                </form>\n            </section>\n\n        </main>\n    );\n}\n\nexport default Login;","import React from 'react';\n\nfunction InfoTooltip({ caption, icon, isOpen, onClose }) {\n    return (\n        <div className={`popup ${isOpen && 'popup_opened'}`}>\n            <div className=\"tooltip\">\n                <button className=\"popup__close-button\" onClick={onClose} type=\"button\" />\n                <div className={`tooltip__icon tooltip__icon_type_${icon}`}></div>\n                <p className=\"tooltip__caption\">{caption}</p>\n            </div>\n        </div>\n        \n    )\n}\n\nexport default InfoTooltip;","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\n// этот компонент принимает другой компонент в качестве пропса\n// он также может взять неограниченное число пропсов и передать их новому компоненту\nconst ProtectedRoute = ({ component: Component, ...props }) => {\n  return (\n    <Route>\n      {() =>\n        props.loggedIn ? <Component {...props} /> : <Redirect to=\"./sign-in\" />\n      }\n    </Route>\n  );\n};\n\nexport default ProtectedRoute; ","class Auth {\n    constructor() {\n        this._baseUrl = 'http://api.olgaliubar.students.nomoredomains.monster'\n    }\n\n    _checkResponse(res) {\n        if (res.ok) {\n            return res.json();\n        }\n        return Promise.reject(`Error: ${res.status}`);\n    }\n\n    register(password, email) {\n        return fetch(`${this._baseUrl}/signup`, {\n            method: 'POST',\n            credentials: \"include\",\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                \"password\": password,\n                \"email\": email\n            })\n        })\n            .then(this._checkResponse)\n    }\n\n    signIn(password, email) {\n        return fetch(`${this._baseUrl}/signin`, {\n            method: 'POST',\n            credentials: \"include\",\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                \"password\": password,\n                \"email\": email\n            })\n        })\n            .then(this._checkResponse)\n            .then((data) => {\n                // сохраняем токен\n                localStorage.setItem('token', data.token);\n                return data;\n            })\n    }\n\n    getContent(token) {\n        return fetch(`${this._baseUrl}/users/me`, {\n            method: 'GET',\n            credentials: \"include\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `Bearer ${token}`\n            }\n        })\n            .then(this._checkResponse)\n    }\n}\n\nexport const auth = new Auth();","import React from \"react\";\nimport Header from './Header.js';\nimport Footer from './Footer.js';\nimport Main from './Main.js';\nimport PopupWithForm from './PopupWithForm.js';\nimport ImagePopup from './ImagePopup.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport api from \"../utils/api.js\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport { Route, Switch, useHistory } from 'react-router-dom';\nimport Register from \"./Register\";\nimport Login from \"./Login\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport { auth } from \"../utils/auth\";\n\nfunction App() {\n  //управление попапами\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\n  const [isDeleteCardPopupOpen, setIsDeleteCardPopupOpen] = React.useState(false);\n\n  const [infoTooltip, setInfoTooltip] = React.useState({ caption: '', icon: '', isOpen: false });\n\n  const [cards, setCards] = React.useState([]);\n  const [selectedCard, setSelectedCard] = React.useState(\"\");\n  const [cardForDelete, setCardForDelete] = React.useState(null);\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [email, setEmail] = React.useState('');\n  const [isCardsLoading, setIsCardsLoading] = React.useState(false);\n  const [isCardsLoadError, setIsCardsLoadError] = React.useState();\n\n  const [loggedIn, setLoggedIn] = React.useState(false);\n\n  const history = useHistory();\n\n  React.useEffect(() => {\n    function tokenCheck() {\n      const jwt = localStorage.getItem('token');\n      if (jwt) {\n        auth\n          .getContent(jwt)\n          .then(res => {\n            // console.log(res);\n            if (res) {\n              setEmail(res.email);\n              history.push('/');\n              handleLogin();\n            }\n          })\n          .catch(err => console.log(err))\n      }\n    }\n\n    tokenCheck();\n  }, [loggedIn, history])\n\n  // React.useEffect(() => {\n  //   api.getInitialData()\n  //     .then(([userData, cardsData]) => {\n  //       // console.log(userData);\n  //       setCurrentUser(userData);\n  //       setCards(cardsData);\n  //     })\n  //     .catch((err) => console.log(err));\n  // }, []);\n\n  React.useEffect(() => {\n    if (loggedIn) {\n      api.getUserData()\n        .then((userData) => {\n          setCurrentUser(userData);\n        })\n        .catch(err => console.log(`Загрузка информации о пользователе: ${err}`));\n\n      setIsCardsLoading(true);\n      setIsCardsLoadError();\n      api.getInitialCards()\n        .then((cardData) => {\n          setCards(cardData);\n        })\n        .catch(err => setIsCardsLoadError(err))\n        .finally(() => setIsCardsLoading(false));\n    }\n  }, [loggedIn]);\n\n  function handleCardClick(card) {\n    // console.log(card);\n    setSelectedCard(card)\n    setIsImagePopupOpen(true)\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsImagePopupOpen(false);\n    setInfoTooltip({ ...infoTooltip, isOpen: false });\n    setIsDeleteCardPopupOpen(false);\n    setCardForDelete(undefined);\n  }\n\n  //Обработчик лайка\n  function handleCardLike(card) {\n\n    const isLiked = card.likes.some((like) => like === currentUser._id);\n    api\n      .changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        // console.log(newCard);\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n      })\n      .catch((err) => console.log(err));\n  }\n\n  function handleCardDeleteRequest(card) {\n    setCardForDelete(card);\n    setIsDeleteCardPopupOpen(true);\n  }\n\n  //Обработчик удаления карточки\n  function handleCardDelete(evt) {\n    evt.preventDefault();\n    api\n      .deleteCard(cardForDelete._id)\n      .then(() => {\n        setCards((state) => state.filter((c) => c._id !== cardForDelete._id));\n        setIsDeleteCardPopupOpen(false);\n      })\n      .catch(err => console.log(`При удалении карточки: ${err}`))\n  }\n\n  //Обработчик добавления карточки\n  const [isCardSending, setIsCardSending] = React.useState(false);\n  function handleAddPlaceSubmit(newCard) {\n    setIsCardSending(true);\n    api.uploadCard(newCard)\n    // console.log(newCard)\n      .then((newCardFull) => {\n        console.log(newCardFull);\n        setCards((state) => [\n          newCardFull,\n          ...state,\n        ]);\n        console.log(cards);\n        closeAllPopups();\n      })\n      .catch(err => console.log(`Добавление карточки: ${err}`))\n      .finally(() => setIsCardSending(false));\n  }\n\n  //Обработчик изменения информации пользователя\n  function handleUpdateUser(user) {\n    api\n      .uploadUserInfo(user)\n      .then((res) => {\n        console.log(res)\n        setCurrentUser(res);\n      })\n      .catch((err) => console.log(err))\n      .finally(() => closeAllPopups());\n  }\n\n  //Обработчик изменения аватара\n  function handleUpdateAvatar(link) {\n    api\n      .setUserAvatar(link)\n      .then((res) => {\n        setCurrentUser(res);\n      })\n      .catch((err) => console.log(err))\n      .finally(() => closeAllPopups());\n  }\n\n  function handleLogin() {\n    setLoggedIn(true);\n  }\n\n  function handleLogout() {\n    localStorage.removeItem('token');\n    history.push('/sign-in');\n    setLoggedIn(false);\n  }\n\n  //Обработчик сабмита формы регистрации\n  function handleRegisterFormSubmit(password, email) {\n    auth\n      .register(password, email)\n      .then((res) => {\n        history.push('/sign-in');\n        setInfoTooltip({ caption: 'Вы успешно зарегистрировались!', icon: 'success', isOpen: true });\n        // console.log(res);\n      })\n      .catch((err) => {\n        setInfoTooltip({ caption: 'Что-то пошло не так! Попробуйте еще раз.', icon: 'error', isOpen: true });\n        // console.log(err);\n      })\n  }\n\n  //Обработчик сабмита формы входа\n  function handleLoginFormSubmit(password, email) {\n    auth.signIn(password, email)\n      .then((res) => {\n        // console.log(data)\n          handleLogin();\n          history.push('/');\n      })\n      .catch((err) => {\n        setInfoTooltip({ caption: 'Что-то пошло не так! Попробуйте еще раз.', icon: 'error', isOpen: true });\n        console.log(err);\n      })\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"container\">\n        <div className=\"page\">\n\n          <Header loggedIn={loggedIn}\n            email={email}\n            handleLogout={handleLogout}\n          />\n\n          <Switch>\n            <Route path=\"/sign-up\" >\n              <Register\n                onSubmit={handleRegisterFormSubmit}\n              />\n            </Route>\n\n            <Route path=\"/sign-in\" >\n              <Login\n                onSubmit={handleLoginFormSubmit}\n              />\n            </Route>\n\n\n            <ProtectedRoute\n              path=\"/\"\n              loggedIn={loggedIn}\n              component={Main}\n              onCardClick={handleCardClick}\n              onCardLike={handleCardLike}\n              onDeleteClick={handleCardDeleteRequest}\n              onEditProfileClick={handleEditProfileClick}\n              onEditAvatarClick={handleEditAvatarClick}\n              onAddPlaceClick={handleAddPlaceClick}\n              cards={cards}\n              isCardsLoading={isCardsLoading}\n              isCardsError={isCardsLoadError}\n            />\n          </Switch>\n\n\n          <Footer />\n\n          <EditProfilePopup\n            isOpen={isEditProfilePopupOpen}\n            onClose={closeAllPopups}\n            onUpdateUser={handleUpdateUser}\n          >\n          </EditProfilePopup>\n\n          <AddPlacePopup\n            onClose={closeAllPopups}\n            isOpen={isAddPlacePopupOpen}\n            onAddPlace={handleAddPlaceSubmit}\n            isSending={isCardSending}\n          >\n          </AddPlacePopup>\n\n          <PopupWithForm\n            isOpen={isDeleteCardPopupOpen}\n            title=\"Вы уверены?\"\n            name=\"confirm-delete\"\n            button=\"Да\"\n            onSubmit={handleCardDelete}\n            onClose={closeAllPopups}\n          />\n\n          <ImagePopup\n            name=\"view-image\"\n            card={selectedCard}\n            isOpen={isImagePopupOpen}\n            onClose={closeAllPopups}\n          />\n\n          {/* <PopupWithForm\n            name=\"confirm-delete\"\n            onClose={closeAllPopups}\n            title=\"Вы уверены?\"\n            button=\"Да\" /> */}\n\n          <EditAvatarPopup\n            onClose={closeAllPopups}\n            isOpen={isEditAvatarPopupOpen}\n            onUpdateAvatar={handleUpdateAvatar}\n          >\n          </EditAvatarPopup>\n\n          <InfoTooltip\n            caption={infoTooltip.caption}\n            icon={infoTooltip.icon}\n            isOpen={infoTooltip.isOpen}\n            onClose={closeAllPopups}\n          />\n\n        </div>\n      </div >\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}